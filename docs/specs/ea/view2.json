{
  "$schema": "https://vega.github.io/schema/vega/v6.json",
  "background": "white",
  "padding": 5,
  "title": {
    "text": "View 2: Trade and CO\u2082 Explorer",
    "anchor": "middle",
    "fontSize": 35,
    "offset": 30
  },
  "data": [
    {
      "name": "param_c43b9dc8de4b37bc_store"
    },
    {
      "name": "param_4440efed93a5dd85_store"
    },
    {
      "name": "source_0",
      "url": "data/altair-data-a4c1532269c735857c3cab1da900baf6.json",
      "format": {
        "type": "json"
      }
    },
    {
      "name": "data_0",
      "source": "source_0",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum.group_type === grouping)"
        },
        {
          "type": "filter",
          "expr": "(datum.year === Year)"
        },
        {
          "type": "filter",
          "expr": "((!ShowMissing) || (datum.value !== null))"
        }
      ]
    },
    {
      "name": "data_1",
      "source": "data_0",
      "transform": [
        {
          "type": "aggregate",
          "groupby": [
            "group_value",
            "metric"
          ],
          "ops": [
            "mean"
          ],
          "fields": [
            "value"
          ],
          "as": [
            "mean_value"
          ]
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"mean_value\"]) && isFinite(+datum[\"mean_value\"])"
        }
      ]
    },
    {
      "name": "data_2",
      "source": "source_0",
      "transform": [
        {
          "type": "filter",
          "expr": "length(data(\"param_4440efed93a5dd85_store\")) && vlSelectionTest(\"param_4440efed93a5dd85_store\", datum)"
        }
      ]
    },
    {
      "name": "data_3",
      "source": "data_2",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum.year === Year)"
        },
        {
          "type": "filter",
          "expr": "((!ShowMissing) || (datum.value !== null))"
        }
      ]
    },
    {
      "name": "data_4",
      "source": "data_3",
      "transform": [
        {
          "type": "stack",
          "groupby": [
            "country_name_short"
          ],
          "field": "value",
          "sort": {
            "field": [
              "metric"
            ],
            "order": [
              "descending"
            ]
          },
          "as": [
            "value_start",
            "value_end"
          ],
          "offset": "zero"
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"value\"]) && isFinite(+datum[\"value\"])"
        }
      ]
    },
    {
      "name": "data_5",
      "source": "data_3",
      "transform": [
        {
          "type": "filter",
          "expr": "isValid(datum[\"gdp\"]) && isFinite(+datum[\"gdp\"])"
        }
      ]
    },
    {
      "name": "data_6",
      "source": "data_2",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum.metric === 'co2')"
        },
        {
          "type": "filter",
          "expr": "(datum.year === Year)"
        },
        {
          "type": "aggregate",
          "groupby": [],
          "ops": [
            "mean"
          ],
          "fields": [
            "value"
          ],
          "as": [
            "avg_value"
          ]
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"avg_value\"]) && isFinite(+datum[\"avg_value\"])"
        }
      ]
    },
    {
      "name": "data_7",
      "source": "data_2",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum.metric === 'trade_co2')"
        },
        {
          "type": "filter",
          "expr": "(datum.year === Year)"
        },
        {
          "type": "aggregate",
          "groupby": [],
          "ops": [
            "mean"
          ],
          "fields": [
            "value"
          ],
          "as": [
            "avg_value"
          ]
        },
        {
          "type": "filter",
          "expr": "isValid(datum[\"avg_value\"]) && isFinite(+datum[\"avg_value\"])"
        }
      ]
    }
  ],
  "signals": [
    {
      "name": "concat_0_width",
      "value": 500
    },
    {
      "name": "concat_0_height",
      "value": 700
    },
    {
      "name": "concat_1_width",
      "value": 700
    },
    {
      "name": "concat_1_concat_0_height",
      "value": 400
    },
    {
      "name": "view_4b805b3fcba005f3_1_height",
      "value": 100
    },
    {
      "name": "unit",
      "value": {},
      "on": [
        {
          "events": "pointermove",
          "update": "isTuple(group()) ? group() : unit"
        }
      ]
    },
    {
      "name": "param_c43b9dc8de4b37bc",
      "update": "vlSelectionResolve(\"param_c43b9dc8de4b37bc_store\", \"union\", true, true)"
    },
    {
      "name": "param_4440efed93a5dd85",
      "update": "vlSelectionResolve(\"param_4440efed93a5dd85_store\", \"union\", true, true)"
    },
    {
      "name": "ShowMissing",
      "value": true,
      "bind": {
        "input": "checkbox",
        "name": "Show Only Non-Missing Data"
      }
    },
    {
      "name": "grouping",
      "value": "continent_name",
      "bind": {
        "input": "radio",
        "options": [
          "continent_name",
          "gdp_bin",
          "pop_bin",
          "econ_group"
        ],
        "labels": [
          "Continent",
          "GDP",
          "Population",
          "Trading Bloc"
        ],
        "name": "Group By: "
      }
    },
    {
      "name": "Year",
      "value": 1990,
      "bind": {
        "input": "range",
        "max": 2022,
        "min": 1990,
        "step": 1
      }
    }
  ],
  "layout": {
    "padding": 20,
    "bounds": "full",
    "align": "each"
  },
  "marks": [
    {
      "type": "group",
      "name": "concat_0_group",
      "title": {
        "text": "Average Total CO\u2082 vs Average Trade CO\u2082",
        "subtitle": "By Dynamic Grouping",
        "frame": "group"
      },
      "style": [
        "cell",
        "view"
      ],
      "encode": {
        "update": {
          "width": {
            "signal": "concat_0_width"
          },
          "height": {
            "signal": "concat_0_height"
          }
        }
      },
      "signals": [
        {
          "name": "param_c43b9dc8de4b37bc_tuple",
          "on": [
            {
              "events": [
                {
                  "source": "scope",
                  "type": "mouseover"
                }
              ],
              "update": "datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0 ? {unit: \"view_5ee0aad1928b8529_0\", fields: param_c43b9dc8de4b37bc_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"country_name\"]]} : null",
              "force": true
            },
            {
              "events": [
                {
                  "source": "view",
                  "type": "mouseout"
                }
              ],
              "update": "null"
            }
          ]
        },
        {
          "name": "param_c43b9dc8de4b37bc_tuple_fields",
          "value": [
            {
              "type": "E",
              "field": "country_name"
            }
          ]
        },
        {
          "name": "param_c43b9dc8de4b37bc_toggle",
          "value": false,
          "on": [
            {
              "events": [
                {
                  "source": "scope",
                  "type": "mouseover"
                }
              ],
              "update": "event.shiftKey"
            },
            {
              "events": [
                {
                  "source": "view",
                  "type": "mouseout"
                }
              ],
              "update": "false"
            }
          ]
        },
        {
          "name": "param_c43b9dc8de4b37bc_modify",
          "on": [
            {
              "events": {
                "signal": "param_c43b9dc8de4b37bc_tuple"
              },
              "update": "modify(\"param_c43b9dc8de4b37bc_store\", param_c43b9dc8de4b37bc_toggle ? null : param_c43b9dc8de4b37bc_tuple, param_c43b9dc8de4b37bc_toggle ? null : true, param_c43b9dc8de4b37bc_toggle ? param_c43b9dc8de4b37bc_tuple : null)"
            }
          ]
        },
        {
          "name": "param_4440efed93a5dd85_tuple",
          "on": [
            {
              "events": [
                {
                  "source": "scope",
                  "type": "click"
                }
              ],
              "update": "datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0 ? {unit: \"view_5ee0aad1928b8529_0\", fields: param_4440efed93a5dd85_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"group_value\"], (item().isVoronoi ? datum.datum : datum)[\"metric\"]]} : null",
              "force": true
            },
            {
              "events": [
                {
                  "source": "view",
                  "type": "dblclick"
                }
              ],
              "update": "null"
            }
          ]
        },
        {
          "name": "param_4440efed93a5dd85_tuple_fields",
          "value": [
            {
              "type": "E",
              "field": "group_value"
            },
            {
              "type": "E",
              "field": "metric"
            }
          ]
        },
        {
          "name": "param_4440efed93a5dd85_toggle",
          "value": false,
          "on": [
            {
              "events": [
                {
                  "source": "scope",
                  "type": "click"
                }
              ],
              "update": "event.shiftKey"
            },
            {
              "events": [
                {
                  "source": "view",
                  "type": "dblclick"
                }
              ],
              "update": "false"
            }
          ]
        },
        {
          "name": "param_4440efed93a5dd85_modify",
          "on": [
            {
              "events": {
                "signal": "param_4440efed93a5dd85_tuple"
              },
              "update": "modify(\"param_4440efed93a5dd85_store\", param_4440efed93a5dd85_toggle ? null : param_4440efed93a5dd85_tuple, param_4440efed93a5dd85_toggle ? null : true, param_4440efed93a5dd85_toggle ? param_4440efed93a5dd85_tuple : null)"
            }
          ]
        }
      ],
      "marks": [
        {
          "name": "view_5ee0aad1928b8529_0_marks",
          "type": "rect",
          "style": [
            "bar"
          ],
          "interactive": true,
          "from": {
            "data": "data_1"
          },
          "encode": {
            "update": {
              "fill": {
                "scale": "color",
                "field": "metric"
              },
              "opacity": [
                {
                  "test": "length(data(\"param_4440efed93a5dd85_store\")) && vlSelectionTest(\"param_4440efed93a5dd85_store\", datum)",
                  "value": 1
                },
                {
                  "value": 0.3
                }
              ],
              "tooltip": {
                "signal": "{\"Group\": isValid(datum[\"group_value\"]) ? datum[\"group_value\"] : \"\"+datum[\"group_value\"], \"Metric\": isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"], \"Average CO\u2082\": format(datum[\"mean_value\"], \".2f\")}"
              },
              "ariaRoleDescription": {
                "value": "bar"
              },
              "description": {
                "signal": "\"Group: \" + (isValid(datum[\"group_value\"]) ? datum[\"group_value\"] : \"\"+datum[\"group_value\"]) + \"; Average CO\u2082: \" + (format(datum[\"mean_value\"], \"\")) + \"; metric: \" + (isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"]) + \"; Metric: \" + (isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"])"
              },
              "x": {
                "scale": "concat_0_x",
                "field": "group_value",
                "offset": {
                  "scale": "xOffset",
                  "field": "metric"
                }
              },
              "width": {
                "signal": "max(0.25, bandwidth('xOffset'))"
              },
              "y": {
                "scale": "concat_0_y",
                "field": "mean_value"
              },
              "y2": {
                "signal": "scale('concat_0_y', inrange(0, domain('concat_0_y')) ? 0 : domain('concat_0_y')[0])"
              }
            }
          }
        },
        {
          "name": "concat_0_layer_1_marks",
          "type": "rect",
          "style": [
            "bar"
          ],
          "interactive": false,
          "from": {
            "data": "data_0"
          },
          "encode": {
            "update": {
              "opacity": {
                "value": 0
              },
              "fill": {
                "value": "#4c78a8"
              },
              "ariaRoleDescription": {
                "value": "bar"
              },
              "x": {
                "field": {
                  "group": "width"
                }
              },
              "x2": {
                "value": 0
              },
              "y": {
                "value": 0
              },
              "y2": {
                "field": {
                  "group": "height"
                }
              }
            }
          }
        }
      ],
      "axes": [
        {
          "scale": "concat_0_y",
          "orient": "left",
          "gridScale": "concat_0_x",
          "grid": true,
          "tickCount": {
            "signal": "ceil(concat_0_height/40)"
          },
          "domain": false,
          "labels": false,
          "aria": false,
          "maxExtent": 0,
          "minExtent": 0,
          "ticks": false,
          "zindex": 0
        },
        {
          "scale": "concat_0_x",
          "orient": "bottom",
          "grid": false,
          "title": "Group",
          "labelAngle": 0,
          "titleFontSize": 15,
          "titlePadding": 10,
          "labelBaseline": "top",
          "zindex": 0
        },
        {
          "scale": "concat_0_y",
          "orient": "left",
          "grid": false,
          "title": "Average CO\u2082",
          "titleFontSize": 15,
          "titlePadding": 10,
          "labelOverlap": true,
          "tickCount": {
            "signal": "ceil(concat_0_height/40)"
          },
          "zindex": 0
        }
      ],
      "legends": [
        {
          "title": "Metric",
          "fill": "color",
          "symbolType": "square",
          "encode": {
            "symbols": {
              "update": {
                "opacity": {
                  "value": 1
                }
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "concat_1_group",
      "layout": {
        "padding": 20,
        "columns": 1,
        "bounds": "full",
        "align": "each"
      },
      "marks": [
        {
          "type": "group",
          "name": "concat_1_concat_0_group",
          "title": {
            "text": "Countries in Selected Group",
            "subtitle": "Ordered by GDP, Ascending",
            "frame": "group"
          },
          "style": "cell",
          "encode": {
            "update": {
              "width": {
                "signal": "concat_1_width"
              },
              "height": {
                "signal": "concat_1_concat_0_height"
              }
            }
          },
          "signals": [
            {
              "name": "param_c43b9dc8de4b37bc_tuple",
              "on": [
                {
                  "events": [
                    {
                      "source": "scope",
                      "type": "mouseover"
                    }
                  ],
                  "update": "datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0 ? {unit: \"view_cfbc20ec1e161717_0\", fields: param_c43b9dc8de4b37bc_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"country_name\"]]} : null",
                  "force": true
                },
                {
                  "events": [
                    {
                      "source": "view",
                      "type": "mouseout"
                    }
                  ],
                  "update": "null"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_tuple_fields",
              "value": [
                {
                  "type": "E",
                  "field": "country_name"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_toggle",
              "value": false,
              "on": [
                {
                  "events": [
                    {
                      "source": "scope",
                      "type": "mouseover"
                    }
                  ],
                  "update": "event.shiftKey"
                },
                {
                  "events": [
                    {
                      "source": "view",
                      "type": "mouseout"
                    }
                  ],
                  "update": "false"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_modify",
              "on": [
                {
                  "events": {
                    "signal": "param_c43b9dc8de4b37bc_tuple"
                  },
                  "update": "modify(\"param_c43b9dc8de4b37bc_store\", param_c43b9dc8de4b37bc_toggle ? null : param_c43b9dc8de4b37bc_tuple, param_c43b9dc8de4b37bc_toggle ? null : true, param_c43b9dc8de4b37bc_toggle ? param_c43b9dc8de4b37bc_tuple : null)"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "view_cfbc20ec1e161717_0_marks",
              "type": "rect",
              "style": [
                "bar"
              ],
              "interactive": true,
              "from": {
                "data": "data_4"
              },
              "encode": {
                "update": {
                  "fill": {
                    "scale": "color",
                    "field": "metric"
                  },
                  "opacity": [
                    {
                      "test": "!length(data(\"param_c43b9dc8de4b37bc_store\")) || vlSelectionTest(\"param_c43b9dc8de4b37bc_store\", datum)",
                      "value": 1
                    },
                    {
                      "value": 0.1
                    }
                  ],
                  "tooltip": {
                    "signal": "{\"Country\": isValid(datum[\"country_name_short\"]) ? datum[\"country_name_short\"] : \"\"+datum[\"country_name_short\"], \"GDP\": format(datum[\"gdp\"], \".2s\"), \"Value\": format(datum[\"value\"], \"\"), \"Metric\": isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"]}"
                  },
                  "ariaRoleDescription": {
                    "value": "bar"
                  },
                  "description": {
                    "signal": "\"Country: \" + (isValid(datum[\"country_name_short\"]) ? datum[\"country_name_short\"] : \"\"+datum[\"country_name_short\"]) + \"; CO\u2082 Emissions: \" + (format(datum[\"value\"], \"\")) + \"; metric: \" + (isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"]) + \"; GDP: \" + (format(datum[\"gdp\"], \".2s\")) + \"; Value: \" + (format(datum[\"value\"], \"\")) + \"; Metric: \" + (isValid(datum[\"metric\"]) ? datum[\"metric\"] : \"\"+datum[\"metric\"])"
                  },
                  "x": {
                    "scale": "concat_1_concat_0_x",
                    "field": "country_name_short"
                  },
                  "width": {
                    "signal": "max(0.25, bandwidth('concat_1_concat_0_x'))"
                  },
                  "y": {
                    "scale": "concat_1_concat_0_y",
                    "field": "value_end"
                  },
                  "y2": {
                    "scale": "concat_1_concat_0_y",
                    "field": "value_start"
                  }
                }
              }
            },
            {
              "name": "concat_1_concat_0_layer_1_marks",
              "type": "rule",
              "style": [
                "rule"
              ],
              "interactive": true,
              "from": {
                "data": "data_6"
              },
              "encode": {
                "update": {
                  "stroke": {
                    "value": "blue"
                  },
                  "tooltip": {
                    "signal": "{\"CO\u2082 Average\": format(datum[\"avg_value\"], \"\")}"
                  },
                  "description": {
                    "signal": "\"avg_value: \" + (format(datum[\"avg_value\"], \"\")) + \"; CO\u2082 Average: \" + (format(datum[\"avg_value\"], \"\"))"
                  },
                  "x": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "x2": {
                    "value": 0
                  },
                  "y": {
                    "scale": "concat_1_concat_0_y",
                    "field": "avg_value"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                }
              }
            },
            {
              "name": "concat_1_concat_0_layer_2_marks",
              "type": "rule",
              "style": [
                "rule"
              ],
              "interactive": true,
              "from": {
                "data": "data_7"
              },
              "encode": {
                "update": {
                  "stroke": {
                    "value": "orange"
                  },
                  "tooltip": {
                    "signal": "{\"Trade CO\u2082 Average\": format(datum[\"avg_value\"], \"\")}"
                  },
                  "description": {
                    "signal": "\"avg_value: \" + (format(datum[\"avg_value\"], \"\")) + \"; Trade CO\u2082 Average: \" + (format(datum[\"avg_value\"], \"\"))"
                  },
                  "x": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "x2": {
                    "value": 0
                  },
                  "y": {
                    "scale": "concat_1_concat_0_y",
                    "field": "avg_value"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                }
              }
            }
          ],
          "axes": [
            {
              "scale": "concat_1_concat_0_y",
              "orient": "left",
              "gridScale": "concat_1_concat_0_x",
              "grid": true,
              "tickCount": {
                "signal": "ceil(concat_1_concat_0_height/40)"
              },
              "domain": false,
              "labels": false,
              "aria": false,
              "maxExtent": 0,
              "minExtent": 0,
              "ticks": false,
              "zindex": 0
            },
            {
              "scale": "concat_1_concat_0_x",
              "orient": "bottom",
              "grid": false,
              "title": "Country",
              "labelAngle": 290,
              "titleFontSize": 15,
              "titlePadding": 10,
              "labelAlign": "right",
              "labelBaseline": "middle",
              "zindex": 0
            },
            {
              "scale": "concat_1_concat_0_y",
              "orient": "left",
              "grid": false,
              "title": "CO\u2082 Emissions",
              "titleFontSize": 15,
              "titlePadding": 10,
              "labelOverlap": true,
              "tickCount": {
                "signal": "ceil(concat_1_concat_0_height/40)"
              },
              "zindex": 0
            }
          ]
        },
        {
          "type": "group",
          "name": "view_4b805b3fcba005f3_1_group",
          "title": {
            "text": "GDP of Selected Countries (in USD)",
            "frame": "group"
          },
          "style": "cell",
          "encode": {
            "update": {
              "width": {
                "signal": "concat_1_width"
              },
              "height": {
                "signal": "view_4b805b3fcba005f3_1_height"
              }
            }
          },
          "signals": [
            {
              "name": "height",
              "update": "view_4b805b3fcba005f3_1_height"
            },
            {
              "name": "param_c43b9dc8de4b37bc_tuple",
              "on": [
                {
                  "events": [
                    {
                      "source": "scope",
                      "type": "mouseover"
                    }
                  ],
                  "update": "datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0 ? {unit: \"view_4b805b3fcba005f3_1\", fields: param_c43b9dc8de4b37bc_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)[\"country_name\"]]} : null",
                  "force": true
                },
                {
                  "events": [
                    {
                      "source": "view",
                      "type": "mouseout"
                    }
                  ],
                  "update": "null"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_tuple_fields",
              "value": [
                {
                  "type": "E",
                  "field": "country_name"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_toggle",
              "value": false,
              "on": [
                {
                  "events": [
                    {
                      "source": "scope",
                      "type": "mouseover"
                    }
                  ],
                  "update": "event.shiftKey"
                },
                {
                  "events": [
                    {
                      "source": "view",
                      "type": "mouseout"
                    }
                  ],
                  "update": "false"
                }
              ]
            },
            {
              "name": "param_c43b9dc8de4b37bc_modify",
              "on": [
                {
                  "events": {
                    "signal": "param_c43b9dc8de4b37bc_tuple"
                  },
                  "update": "modify(\"param_c43b9dc8de4b37bc_store\", param_c43b9dc8de4b37bc_toggle ? null : param_c43b9dc8de4b37bc_tuple, param_c43b9dc8de4b37bc_toggle ? null : true, param_c43b9dc8de4b37bc_toggle ? param_c43b9dc8de4b37bc_tuple : null)"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "view_4b805b3fcba005f3_1_marks",
              "type": "rect",
              "style": [
                "tick"
              ],
              "interactive": true,
              "from": {
                "data": "data_5"
              },
              "encode": {
                "update": {
                  "opacity": [
                    {
                      "test": "!length(data(\"param_c43b9dc8de4b37bc_store\")) || vlSelectionTest(\"param_c43b9dc8de4b37bc_store\", datum)",
                      "value": 1
                    },
                    {
                      "value": 0.1
                    }
                  ],
                  "fill": {
                    "value": "#4c78a8"
                  },
                  "tooltip": {
                    "signal": "{\"Country\": isValid(datum[\"country_name_short\"]) ? datum[\"country_name_short\"] : \"\"+datum[\"country_name_short\"], \"GDP\": format(datum[\"gdp\"], \".2s\")}"
                  },
                  "ariaRoleDescription": {
                    "value": "tick"
                  },
                  "description": {
                    "signal": "\"gdp: \" + (format(datum[\"gdp\"], \"\")) + \"; Country: \" + (isValid(datum[\"country_name_short\"]) ? datum[\"country_name_short\"] : \"\"+datum[\"country_name_short\"]) + \"; GDP: \" + (format(datum[\"gdp\"], \".2s\"))"
                  },
                  "yc": {
                    "signal": "view_4b805b3fcba005f3_1_height",
                    "mult": 0.5
                  },
                  "height": {
                    "value": 100
                  },
                  "xc": {
                    "scale": "view_4b805b3fcba005f3_1_x",
                    "field": "gdp"
                  },
                  "width": {
                    "value": 1
                  }
                }
              }
            }
          ],
          "axes": [
            {
              "scale": "view_4b805b3fcba005f3_1_x",
              "orient": "bottom",
              "grid": true,
              "tickCount": {
                "signal": "ceil(concat_1_width/40)"
              },
              "domain": false,
              "labels": false,
              "aria": false,
              "maxExtent": 0,
              "minExtent": 0,
              "ticks": false,
              "zindex": 0
            },
            {
              "scale": "view_4b805b3fcba005f3_1_x",
              "orient": "bottom",
              "grid": false,
              "title": "gdp",
              "labelFlush": true,
              "labelOverlap": true,
              "tickCount": {
                "signal": "ceil(concat_1_width/40)"
              },
              "zindex": 0
            }
          ]
        }
      ],
      "legends": [
        {
          "labelColor": "rgba(0,0,0,0)",
          "symbolFillColor": "rgba(0,0,0,0)",
          "symbolSize": 0,
          "symbolStrokeColor": "rgba(0,0,0,0)",
          "titleColor": "rgba(0,0,0,0)",
          "fill": "color",
          "symbolType": "square",
          "title": "metric",
          "encode": {
            "symbols": {
              "update": {
                "opacity": {
                  "value": 1
                }
              }
            }
          }
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "xOffset",
      "type": "band",
      "domain": {
        "data": "data_1",
        "field": "metric",
        "sort": true
      },
      "range": [
        0,
        {
          "signal": "bandwidth('concat_0_x')"
        }
      ]
    },
    {
      "name": "color",
      "type": "ordinal",
      "domain": {
        "fields": [
          {
            "data": "data_1",
            "field": "metric"
          },
          {
            "data": "data_4",
            "field": "metric"
          }
        ],
        "sort": true
      },
      "range": "category"
    },
    {
      "name": "concat_0_x",
      "type": "band",
      "domain": {
        "data": "data_1",
        "field": "group_value",
        "sort": true
      },
      "range": [
        0,
        {
          "signal": "concat_0_width"
        }
      ],
      "paddingInner": 0.2,
      "paddingOuter": 0.2
    },
    {
      "name": "concat_0_y",
      "type": "linear",
      "domain": {
        "data": "data_1",
        "field": "mean_value"
      },
      "range": [
        {
          "signal": "concat_0_height"
        },
        0
      ],
      "zero": false,
      "nice": true
    },
    {
      "name": "concat_1_concat_0_x",
      "type": "band",
      "domain": {
        "data": "data_3",
        "field": "country_name_short",
        "sort": {
          "op": "sum",
          "field": "gdp"
        }
      },
      "range": [
        0,
        {
          "signal": "concat_1_width"
        }
      ],
      "paddingInner": 0.1,
      "paddingOuter": 0.05
    },
    {
      "name": "concat_1_concat_0_y",
      "type": "linear",
      "domain": {
        "fields": [
          {
            "data": "data_4",
            "field": "value_start"
          },
          {
            "data": "data_4",
            "field": "value_end"
          },
          {
            "data": "data_6",
            "field": "avg_value"
          },
          {
            "data": "data_7",
            "field": "avg_value"
          }
        ]
      },
      "range": [
        {
          "signal": "concat_1_concat_0_height"
        },
        0
      ],
      "nice": true,
      "zero": true
    },
    {
      "name": "view_4b805b3fcba005f3_1_x",
      "type": "linear",
      "domain": {
        "data": "data_5",
        "field": "gdp"
      },
      "range": [
        0,
        {
          "signal": "concat_1_width"
        }
      ],
      "nice": true,
      "zero": true
    }
  ],
  "config": {
    "style": {
      "cell": {
        "fill": null,
        "stroke": null
      }
    }
  }
}