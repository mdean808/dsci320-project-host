{
  "config": {
    "view": {
      "continuousWidth": 300,
      "continuousHeight": 300,
      "fill": null,
      "stroke": null
    }
  },
  "hconcat": [
    {
      "layer": [
        {
          "mark": {
            "type": "bar"
          },
          "encoding": {
            "color": {
              "field": "metric",
              "title": "Metric",
              "type": "nominal"
            },
            "opacity": {
              "condition": {
                "param": "param_4440efed93a5dd85",
                "value": 1,
                "empty": false
              },
              "value": 0.3
            },
            "tooltip": [
              {
                "field": "group_value",
                "title": "Group",
                "type": "nominal"
              },
              {
                "field": "metric",
                "title": "Metric",
                "type": "nominal"
              },
              {
                "aggregate": "mean",
                "field": "value",
                "format": ".2f",
                "title": "Average CO\u2082",
                "type": "quantitative"
              }
            ],
            "x": {
              "axis": {
                "labelAngle": 0,
                "titlePadding": 10,
                "titleFontSize": 15
              },
              "field": "group_value",
              "title": "Group",
              "type": "nominal"
            },
            "xOffset": {
              "field": "metric",
              "type": "nominal"
            },
            "y": {
              "aggregate": "mean",
              "axis": {
                "titlePadding": 10,
                "titleFontSize": 15
              },
              "field": "value",
              "scale": {
                "zero": false
              },
              "title": "Average CO\u2082",
              "type": "quantitative"
            }
          },
          "name": "view_5ee0aad1928b8529_0",
          "transform": [
            {
              "filter": "(datum.group_type === grouping)"
            },
            {
              "filter": "(datum.year === Year)"
            },
            {
              "filter": "((!ShowMissing) || (datum.value !== null))"
            }
          ]
        },
        {
          "mark": {
            "type": "bar",
            "opacity": 0
          },
          "transform": [
            {
              "filter": "(datum.group_type === grouping)"
            },
            {
              "filter": "(datum.year === Year)"
            },
            {
              "filter": "((!ShowMissing) || (datum.value !== null))"
            }
          ]
        }
      ],
      "height": 700,
      "title": {
        "text": "Average Total CO\u2082 vs Average Trade CO\u2082",
        "subtitle": "By Dynamic Grouping"
      },
      "width": 500
    },
    {
      "vconcat": [
        {
          "layer": [
            {
              "mark": {
                "type": "bar"
              },
              "encoding": {
                "color": {
                  "field": "metric",
                  "legend": {
                    "labelColor": "rgba(0,0,0,0)",
                    "symbolFillColor": "rgba(0,0,0,0)",
                    "symbolSize": 0,
                    "symbolStrokeColor": "rgba(0,0,0,0)",
                    "titleColor": "rgba(0,0,0,0)"
                  },
                  "type": "nominal"
                },
                "opacity": {
                  "condition": {
                    "param": "param_c43b9dc8de4b37bc",
                    "value": 1,
                    "empty": true
                  },
                  "value": 0.1
                },
                "tooltip": [
                  {
                    "field": "country_name_short",
                    "title": "Country",
                    "type": "nominal"
                  },
                  {
                    "field": "gdp",
                    "format": ".2s",
                    "title": "GDP",
                    "type": "quantitative"
                  },
                  {
                    "field": "value",
                    "title": "Value",
                    "type": "quantitative"
                  },
                  {
                    "field": "metric",
                    "title": "Metric",
                    "type": "nominal"
                  }
                ],
                "x": {
                  "axis": {
                    "titleFontSize": 15,
                    "titlePadding": 10,
                    "labelAngle": -70
                  },
                  "field": "country_name_short",
                  "sort": {
                    "field": "gdp",
                    "order": "ascending"
                  },
                  "title": "Country",
                  "type": "nominal"
                },
                "y": {
                  "axis": {
                    "titleFontSize": 15,
                    "titlePadding": 10
                  },
                  "field": "value",
                  "title": "CO\u2082 Emissions",
                  "type": "quantitative"
                }
              },
              "name": "view_cfbc20ec1e161717_0",
              "title": {
                "text": "Countries in Selected Group",
                "subtitle": "Ordered by GDP, Ascending"
              },
              "transform": [
                {
                  "filter": {
                    "param": "param_4440efed93a5dd85",
                    "empty": false
                  }
                },
                {
                  "filter": "(datum.year === Year)"
                },
                {
                  "filter": "((!ShowMissing) || (datum.value !== null))"
                }
              ]
            },
            {
              "mark": {
                "type": "rule",
                "color": "blue",
                "size": 1
              },
              "encoding": {
                "tooltip": [
                  {
                    "field": "avg_value",
                    "title": "CO\u2082 Average",
                    "type": "quantitative"
                  }
                ],
                "y": {
                  "field": "avg_value",
                  "type": "quantitative"
                }
              },
              "transform": [
                {
                  "filter": {
                    "param": "param_4440efed93a5dd85",
                    "empty": false
                  }
                },
                {
                  "filter": "(datum.metric === 'co2')"
                },
                {
                  "filter": "(datum.year === Year)"
                },
                {
                  "aggregate": [
                    {
                      "op": "mean",
                      "field": "value",
                      "as": "avg_value"
                    }
                  ]
                }
              ]
            },
            {
              "mark": {
                "type": "rule",
                "color": "orange",
                "size": 1
              },
              "encoding": {
                "tooltip": [
                  {
                    "field": "avg_value",
                    "title": "Trade CO\u2082 Average",
                    "type": "quantitative"
                  }
                ],
                "y": {
                  "field": "avg_value",
                  "type": "quantitative"
                }
              },
              "transform": [
                {
                  "filter": {
                    "param": "param_4440efed93a5dd85",
                    "empty": false
                  }
                },
                {
                  "filter": "(datum.metric === 'trade_co2')"
                },
                {
                  "filter": "(datum.year === Year)"
                },
                {
                  "aggregate": [
                    {
                      "op": "mean",
                      "field": "value",
                      "as": "avg_value"
                    }
                  ]
                }
              ]
            }
          ],
          "height": 400,
          "width": 700
        },
        {
          "mark": {
            "type": "tick",
            "size": 100
          },
          "encoding": {
            "opacity": {
              "condition": {
                "param": "param_c43b9dc8de4b37bc",
                "value": 1,
                "empty": true
              },
              "value": 0.1
            },
            "tooltip": [
              {
                "field": "country_name_short",
                "title": "Country",
                "type": "nominal"
              },
              {
                "field": "gdp",
                "format": ".2s",
                "title": "GDP",
                "type": "quantitative"
              }
            ],
            "x": {
              "field": "gdp",
              "type": "quantitative"
            }
          },
          "height": 100,
          "name": "view_4b805b3fcba005f3_1",
          "title": "GDP of Selected Countries (in USD)",
          "transform": [
            {
              "filter": {
                "param": "param_4440efed93a5dd85",
                "empty": false
              }
            },
            {
              "filter": "(datum.year === Year)"
            },
            {
              "filter": "((!ShowMissing) || (datum.value !== null))"
            }
          ],
          "width": 700
        }
      ]
    }
  ],
  "data": {
    "url": "data/altair-data-a4c1532269c735857c3cab1da900baf6.json",
    "format": {
      "type": "json"
    }
  },
  "params": [
    {
      "name": "ShowMissing",
      "bind": {
        "input": "checkbox",
        "name": "Show Only Non-Missing Data"
      },
      "value": true
    },
    {
      "name": "grouping",
      "bind": {
        "input": "radio",
        "options": [
          "continent_name",
          "gdp_bin",
          "pop_bin",
          "econ_group"
        ],
        "labels": [
          "Continent",
          "GDP",
          "Population",
          "Trading Bloc"
        ],
        "name": "Group By: "
      },
      "value": "continent_name"
    },
    {
      "name": "Year",
      "bind": {
        "input": "range",
        "max": 2022.0,
        "min": 1990.0,
        "step": 1
      },
      "value": 1990.0
    },
    {
      "name": "param_c43b9dc8de4b37bc",
      "select": {
        "type": "point",
        "clear": "mouseout",
        "fields": [
          "country_name"
        ],
        "on": "mouseover"
      },
      "views": [
        "view_5ee0aad1928b8529_0",
        "view_cfbc20ec1e161717_0",
        "view_4b805b3fcba005f3_1"
      ]
    },
    {
      "name": "param_4440efed93a5dd85",
      "select": {
        "type": "point",
        "fields": [
          "group_value",
          "metric"
        ],
        "on": "click"
      },
      "views": [
        "view_5ee0aad1928b8529_0"
      ]
    }
  ],
  "resolve": {
    "legend": {
      "color": "independent",
      "size": "independent"
    }
  },
  "spacing": 20,
  "title": {
    "text": "View 2: Trade and CO\u2082 Explorer",
    "anchor": "middle",
    "fontSize": 35,
    "offset": 30
  },
  "$schema": "https://vega.github.io/schema/vega-lite/v6.1.0.json"
}